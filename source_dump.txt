# ==================================================
# Path: E:\HTMLCSS\PROJECT_ONTAP\Project_Movix\client
# Detected tech: docker, gitlab_ci, javascript, python, react, typescript
# ==================================================

## DIRECTORY STRUCTURE
```
client/
‚îú‚îÄ‚îÄ .git/
‚îú‚îÄ‚îÄ node_modules/
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ favicon.ico
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ logo192.png
‚îÇ   ‚îú‚îÄ‚îÄ logo512.png
‚îÇ   ‚îú‚îÄ‚îÄ manifest.json
‚îÇ   ‚îî‚îÄ‚îÄ robots.txt
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fonts/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ images/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ videos/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ErrorDisplay/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FIlmAdminList/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Form/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ FilmForm.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Loading/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.jsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MenuSider/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ index.jsx
‚îÇ   ‚îú‚îÄ‚îÄ constants/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ image.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pagination.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ roles.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ status.js
‚îÇ   ‚îú‚îÄ‚îÄ helpers/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ uploadImage.js
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useImageUpload.js
‚îÇ   ‚îú‚îÄ‚îÄ layouts/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LayoutAdmin/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LayoutAdmin.scss
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.jsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LayoutUser/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ index.jsx
‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Login/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Login.scss
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cinemas/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CinemaCreatePage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CinemaDetailPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CinemaEditPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CinemaListPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cinemas.scss
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ films/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ FilmCreatePage.jsx
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ FilmDetailPage.jsx
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ FilmEditPage.jsx
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ FilmListPage.jsx
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ films.scss
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ index.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LogoutPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NotFound.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Unauthorized.jsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user/
‚îÇ   ‚îú‚îÄ‚îÄ redux/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ actions/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.action.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ reducers/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ auth.reducer.js
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ index.js
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AllRoutes.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PrivateRoutes.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ adminRoutes.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commonRoutes.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ userRoutes.js
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authServices.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ categoryServices.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cinemaServices.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ filmServices.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ userServices.js
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ axiosClient.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js
‚îÇ   ‚îú‚îÄ‚îÄ App.css
‚îÇ   ‚îú‚îÄ‚îÄ App.js
‚îÇ   ‚îú‚îÄ‚îÄ App.test.js
‚îÇ   ‚îú‚îÄ‚îÄ index.css
‚îÇ   ‚îú‚îÄ‚îÄ index.js
‚îÇ   ‚îú‚îÄ‚îÄ logo.svg
‚îÇ   ‚îú‚îÄ‚îÄ reportWebVitals.js
‚îÇ   ‚îú‚îÄ‚îÄ setupTests.js
‚îÇ   ‚îî‚îÄ‚îÄ store.js
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ package-lock.json
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ source_dump.txt
```

## FILE CONTENTS

### src\App.js
```js
import './App.css';
import { useDispatch } from 'react-redux';
import { useEffect } from 'react';
import { fetchUser } from './redux/actions/auth.action';
import AllRoutes from './routes/AllRoutes';

function App() {
  const dispatch = useDispatch();
   useEffect(() => {
    dispatch(fetchUser()); // g·ªçi 1 l·∫ßn khi load trang
  }, [dispatch]);

  return (
    <>
      <AllRoutes />
    </>
  );
}

export default App;

```

### src\App.test.js
```js
import { render, screen } from '@testing-library/react';
import App from './App';

test('renders learn react link', () => {
  render(<App />);
  const linkElement = screen.getByText(/learn react/i);
  expect(linkElement).toBeInTheDocument();
});

```

### src\index.js
```js
import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';
import reportWebVitals from './reportWebVitals';
import { BrowserRouter } from 'react-router-dom';
import { Provider } from 'react-redux'
import { PersistGate } from 'redux-persist/integration/react';
import { persistor, store } from './store';
import '@ant-design/v5-patch-for-react-19';
const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(

    <Provider store={store}>
    <PersistGate loading={null} persistor={persistor}>
      <BrowserRouter>
        <App />
      </BrowserRouter>
    </PersistGate>
  </Provider>

);

// If you want to start measuring performance in your app, pass a function
// to log results (for example: reportWebVitals(console.log))
// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals
reportWebVitals();

```

### src\reportWebVitals.js
```js
const reportWebVitals = onPerfEntry => {
  if (onPerfEntry && onPerfEntry instanceof Function) {
    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {
      getCLS(onPerfEntry);
      getFID(onPerfEntry);
      getFCP(onPerfEntry);
      getLCP(onPerfEntry);
      getTTFB(onPerfEntry);
    });
  }
};

export default reportWebVitals;

```

### src\setupTests.js
```js
// jest-dom adds custom jest matchers for asserting on DOM nodes.
// allows you to do things like:
// expect(element).toHaveTextContent(/react/i)
// learn more: https://github.com/testing-library/jest-dom
import '@testing-library/jest-dom';

```

### src\store.js
```js
import { createStore, applyMiddleware } from "redux";
import { persistStore, persistReducer } from "redux-persist";
import storage from "redux-persist/lib/storage"; // d√πng localStorage
import {thunk} from "redux-thunk";
import allReducers from "./redux/reducers";

// Config redux-persist
const persistConfig = {
  key: "root",
  storage,
  whitelist: ["auth"] // ‚úÖ ch·ªâ persist reducer `auth`
};

// G·ªôp reducer persist
const persistedReducer = persistReducer(persistConfig, allReducers);

// T·∫°o store
const store = createStore(
  persistedReducer,
  applyMiddleware(thunk)
);

// T·∫°o persistor ƒë·ªÉ s·ª≠ d·ª•ng trong PersistGate
const persistor = persistStore(store);

export { store, persistor };

```

### src\components\ErrorDisplay\index.jsx
```jsx
import { Alert, Button } from "antd";
import { ReloadOutlined } from "@ant-design/icons";

const ErrorDisplay = ({ 
  message = "C√≥ l·ªói x·∫£y ra", 
  onRetry = null,
  showRetry = true 
}) => {
  return (
    <div style={{ padding: '20px' }}>
      <Alert
        message="L·ªói"
        description={message}
        type="error"
        showIcon
        action={
          showRetry && onRetry && (
            <Button size="small" icon={<ReloadOutlined />} onClick={onRetry}>
              Th·ª≠ l·∫°i
            </Button>
          )
        }
      />
    </div>
  );
};

export default ErrorDisplay;
```

### src\components\FIlmAdminList\index.jsx
```jsx
import React, { useState, useEffect } from 'react';
import { 
  Table, 
  Image, 
  Button, 
  Tag, 
  Space, 
  Popconfirm, 
  message, 
  Tooltip 
} from 'antd';
import {
  EyeOutlined,
  EditOutlined,
  DeleteOutlined
} from '@ant-design/icons';
import { useNavigate } from 'react-router-dom';
import dayjs from 'dayjs';
import { 
  getAllFilms, 
  deleteFilm, 
  updateFilmStatus, 
  updateFilmTrending 
} from '../../services/filmServices';
import Loading from '../Loading';
import ErrorDisplay from '../ErrorDisplay';

const FilmAdminList = () => {
  const navigate = useNavigate();
  const [messageApi, contextHolder] = message.useMessage();
  const [films, setFilms] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [actionLoading, setActionLoading] = useState({});

  // Fetch films data
  const fetchFilms = async () => {
    try {
      setLoading(true);
      setError(null);
      const result = await getAllFilms();
      console.log('result', result);
      setFilms(result.data || []);
    } catch (err) {
      console.error('Error fetching films:', err);
      setError(err.response?.data?.message || 'Kh√¥ng th·ªÉ t·∫£i danh s√°ch phim');
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchFilms();
  }, []);

  // Handle status toggle
  const handleStatusToggle = async (film) => {
    const filmId = film._id;
    const newStatus = film.status === 'active' ? 'inactive' : 'active';
    
    try {
      setActionLoading(prev => ({ ...prev, [`status_${filmId}`]: true }));
      
      await updateFilmStatus(filmId, newStatus);
      
      // Update local state
      setFilms(prev => 
        prev.map(item => 
          item._id === filmId 
            ? { ...item, status: newStatus }
            : item
        )
      );
      
      messageApi.success(
        `ƒê√£ ${newStatus === 'active' ? 'k√≠ch ho·∫°t' : 'v√¥ hi·ªáu h√≥a'} phim th√†nh c√¥ng`
      );
    } catch (err) {
      console.error('Error updating status:', err);
      messageApi.error(err.response?.data?.message || 'Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i');
    } finally {
      setActionLoading(prev => ({ ...prev, [`status_${filmId}`]: false }));
    }
  };

  // Handle trending toggle
  const handleTrendingToggle = async (film) => {
    const filmId = film._id;
    const newTrending = !film.isTrending;
    
    try {
      setActionLoading(prev => ({ ...prev, [`trending_${filmId}`]: true }));
      
      await updateFilmTrending(filmId, newTrending);
      
      // Update local state
      setFilms(prev => 
        prev.map(item => 
          item._id === filmId 
            ? { ...item, isTrending: newTrending }
            : item
        )
      );
      
      messageApi.success(
        `ƒê√£ ${newTrending ? 'ƒë√°nh d·∫•u' : 'b·ªè ƒë√°nh d·∫•u'} phim th·ªãnh h√†nh`
      );
    } catch (err) {
      console.error('Error updating trending:', err);
      messageApi.error(err.response?.data?.message || 'Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i th·ªãnh h√†nh');
    } finally {
      setActionLoading(prev => ({ ...prev, [`trending_${filmId}`]: false }));
    }
  };

  // Handle delete film
  const handleDelete = async (filmId) => {
    try {
      setActionLoading(prev => ({ ...prev, [`delete_${filmId}`]: true }));
      
      await deleteFilm(filmId);
      
      // Remove from local state
      setFilms(prev => prev.filter(item => item._id !== filmId));
      
      messageApi.success('X√≥a phim th√†nh c√¥ng');
    } catch (err) {
      console.error('Error deleting film:', err);
      messageApi.error(err.response?.data?.message || 'Kh√¥ng th·ªÉ x√≥a phim');
    } finally {
      setActionLoading(prev => ({ ...prev, [`delete_${filmId}`]: false }));
    }
  };

  // Table columns
  const columns = [
    {
      title: '·∫¢nh b√¨a',
      dataIndex: 'thumbnail',
      key: 'thumbnail',
      width: 120,
      align: 'center',
      render: (thumbnail, record) => (
        <Image
          src={thumbnail}
          alt={record.title}
          width={80}
          height={120}
          style={{ objectFit: 'cover', borderRadius: '8px' }}
          preview={{
            mask: <div style={{ fontSize: '12px' }}>Xem ·∫£nh</div>
          }}
        />
      ),
    },
    {
      title: 'T√™n phim',
      dataIndex: 'title',
      key: 'title',
      render: (title) => (
        <div style={{ fontWeight: 'bold', maxWidth: '200px' }}>
          {title}
        </div>
      ),
    },
    {
      title: 'Th·ªùi l∆∞·ª£ng',
      dataIndex: 'duration',
      key: 'duration',
      width: 120,
      align: 'center',
      render: (duration) => `${duration} ph√∫t`,
    },
    {
      title: 'Ng√†y kh·ªüi chi·∫øu',
      dataIndex: 'releaseDate',
      key: 'releaseDate',
      align: 'center',
      width: 160,
      render: (date) => dayjs(date).format('DD/MM/YYYY'),
    },
    {
      title: 'H√¨nh th·ª©c chi·∫øu',
      dataIndex: 'availableFormats',
      key: 'availableFormats',
      width: 150,
      render: (formats) => (
        <div>
          {formats?.map(format => (
            <Tag key={format} color="blue" style={{ margin: '2px' }}>
              {format}
            </Tag>
          ))}
        </div>
      ),
    },
    {
      title: 'Gi·ªõi h·∫°n tu·ªïi',
      dataIndex: 'ageRating',
      key: 'ageRating',
      width: 100,
      align: 'center',
      render: (ageRating) => (
        <Tag color="orange">{ageRating}</Tag>
      ),
    },
    {
      title: 'Tr·∫°ng th√°i',
      dataIndex: 'status',
      key: 'status',
      width: 120,
      align: 'center',
      render: (status, record) => (
        <Tag
          color={status === 'active' ? 'green' : 'red'}
          style={{ cursor: 'pointer' }}
          onClick={() => handleStatusToggle(record)}
        >
          {actionLoading[`status_${record._id}`] 
            ? 'ƒêang c·∫≠p nh·∫≠t...' 
            : status === 'active' ? 'Ho·∫°t ƒë·ªông' : 'Ng∆∞ng ho·∫°t ƒë·ªông'
          }
        </Tag>
      ),
    },
    {
      title: 'Th·ªãnh h√†nh',
      dataIndex: 'isTrending',
      key: 'isTrending',
      width: 120,
      align: 'center',
      render: (isTrending, record) => (
        <Tag
          color={isTrending ? 'gold' : 'default'}
          style={{ cursor: 'pointer' }}
          onClick={() => handleTrendingToggle(record)}
        >
          {actionLoading[`trending_${record._id}`] 
            ? 'ƒêang c·∫≠p nh·∫≠t...' 
            : isTrending ? 'Th·ªãnh h√†nh' : 'B√¨nh th∆∞·ªùng'
          }
        </Tag>
      ),
    },
    {
      title: 'H√†nh ƒë·ªông',
      key: 'actions',
      width: 150,
      align: 'center',
      render: (_, record) => (
        <Space size="small">
          <Tooltip title="Xem chi ti·∫øt">
            <Button
              type="primary"
              icon={<EyeOutlined />}
              
              onClick={() => navigate(`/admin/films/${record._id}`)}
            />
          </Tooltip>
          
          <Tooltip title="Ch·ªânh s·ª≠a">
            <Button
              type="default"
              icon={<EditOutlined />}
              
              onClick={() => navigate(`/admin/films/edit/${record._id}`)}
            />
          </Tooltip>
          
          <Tooltip title="X√≥a">
            <Popconfirm
              title="X√°c nh·∫≠n x√≥a"
              description={`B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a phim "${record.title}"?`}
              onConfirm={() => handleDelete(record._id)}
              okText="X√≥a"
              cancelText="H·ªßy"
              okType="danger"
            >
              <Button
                type="primary"
                danger
                icon={<DeleteOutlined />}
                
                loading={actionLoading[`delete_${record._id}`]}
              />
            </Popconfirm>
          </Tooltip>
        </Space>
      ),
    },
  ];

  if (loading) return <Loading tip="ƒêang t·∫£i danh s√°ch phim..." />;
  
  if (error) {
    return (
      <ErrorDisplay 
        message={error}
        onRetry={fetchFilms}
      />
    );
  }

  return (
    <>
      {contextHolder}
      <Table
        columns={columns}
        dataSource={films}
        rowKey="_id"
        pagination={{
          total: films.length,
          pageSize: 10,
          showSizeChanger: true,
          showQuickJumper: true,
          showTotal: (total, range) => 
            `${range[0]}-${range[1]} c·ªßa ${total} phim`,
          pageSizeOptions: ['10', '20', '50', '100'],
        }}
        scroll={{ x: 1200 }}
        size="middle"
        
        style={{ background: '#fff', borderRadius: '8px' }}
      />
    </>
  );
};

export default FilmAdminList;
```

### src\components\Form\FilmForm.jsx
```jsx
import {
  Button,
  Col,
  Form,
  Image,
  Input,
  Row,
  Select,
  Switch,
  Upload,
  DatePicker,
  InputNumber,
} from "antd";
import { PlusOutlined } from "@ant-design/icons";
import ImgCrop from "antd-img-crop";
import { useEffect, useState, useRef } from "react";
import { getCategories } from "../../services/categoryServices";
import useImageUpload from "../../hooks/useImageUpload";
import dayjs from "dayjs";

const { TextArea } = Input;

function FilmForm({
  onFinish,
  onCancel,
  initialValues,
  submitButtonText = "C·∫≠p nh·∫≠t",
}) {
  const [form] = Form.useForm();
  const [categories, setCategories] = useState([]);
  const initialValuesSetRef = useRef(false);

  // S·ª≠ d·ª•ng useImageUpload hook
  const {
    fileList,
    previewOpen,
    previewImage,
    uploading,
    setPreviewOpen,
    setInitialImage,
    getFinalImageUrl,
    resetAll,
    uploadProps,
  } = useImageUpload({
    defaultImage: "https://i.pinimg.com/736x/0b/0a/de/0b0adeec0cb5e9a427a616df27ba04f3.jpg",
    maxCount: 1,
    onUploadSuccess: (url) => console.log("Upload th√†nh c√¥ng:", url),
    onUploadError: (error) => console.error("Upload l·ªói:", error),
  });

  // Fetch categories t·ª´ API
  useEffect(() => {
    const fetchCategories = async () => {
      try {
        const result = await getCategories();
        const categoryListSelect = result.map((item) => ({
          label: item.title,
          value: item._id,
        }));
        setCategories(categoryListSelect);
      } catch (err) {
        console.error("Error fetching categories:", err);
      }
    };
    fetchCategories();
  }, []);

  // Set initial values ch·ªâ m·ªôt l·∫ßn khi c√≥ d·ªØ li·ªáu t·ª´ props
  useEffect(() => {
    if (initialValues && !initialValuesSetRef.current) {
      // Convert arrays th√†nh string ƒë·ªÉ hi·ªÉn th·ªã trong Input
      const formattedValues = { ...initialValues };

      // Convert arrays th√†nh string v·ªõi d·∫•u ph·∫©y
      if (Array.isArray(initialValues.otherTitles)) {
        formattedValues.otherTitles = initialValues.otherTitles.join(", ");
      }

      if (Array.isArray(initialValues.actors)) {
        formattedValues.actors = initialValues.actors.join(", ");
      }

      if (Array.isArray(initialValues.directors)) {
        formattedValues.directors = initialValues.directors.join(", ");
      }

      // Convert categoryIds t·ª´ object -> array string
      if (Array.isArray(initialValues.categoryIds)) {
        formattedValues.categoryIds = initialValues.categoryIds.map(
          (c) => c._id
        );
      }

      // Set initial image using hook
      if (initialValues.thumbnail) {
        setInitialImage(initialValues.thumbnail);
      }

      // Set form values
      form.setFieldsValue({
        ...formattedValues,
        releaseDate: initialValues.releaseDate
          ? dayjs(initialValues.releaseDate)
          : null,
      });

      initialValuesSetRef.current = true; // ƒê√°nh d·∫•u ƒë√£ set xong
    }
  }, [initialValues, form, setInitialImage]);

  // Reset flag khi initialValues thay ƒë·ªïi
  useEffect(() => {
    initialValuesSetRef.current = false;
  }, [initialValues]);

  const handleFinish = async (values) => {
    console.log("Form values before processing:", values);
    try {
      // X·ª≠ l√Ω thumbnail b·∫±ng hook
      const thumbnailUrl = await getFinalImageUrl(initialValues?.thumbnail);
      values.thumbnail = thumbnailUrl;

      // Convert string th√†nh array cho otherTitles, actors, directors
      if (values.otherTitles) {
        values.otherTitles = values.otherTitles
          .split(",")
          .map((item) => item.trim())
          .filter((item) => item !== "");
      } else {
        values.otherTitles = [];
      }

      if (values.actors) {
        values.actors = values.actors
          .split(",")
          .map((item) => item.trim())
          .filter((item) => item !== "");
      } else {
        values.actors = [];
      }

      if (values.directors) {
        values.directors = values.directors
          .split(",")
          .map((item) => item.trim())
          .filter((item) => item !== "");
      } else {
        values.directors = [];
      }

      // ‚úÖ Fix: X·ª≠ l√Ω status ƒë√∫ng c√°ch
      // N·∫øu values.status l√† boolean th√¨ convert sang string
      if (typeof values.status === 'boolean') {
        values.status = values.status ? "active" : "inactive";
      }
      // N·∫øu ƒë√£ l√† string th√¨ gi·ªØ nguy√™n

      // Format releaseDate th√†nh MongoDB Date
      if (values.releaseDate) {
        values.releaseDate = values.releaseDate.toDate();
      }

      console.log("Values after processing:", values);
      const result = await onFinish(values);

      // Ch·ªâ reset form khi onFinish return true (th√†nh c√¥ng)
      if (result === true) {
        form.resetFields();
        resetAll();
        initialValuesSetRef.current = false;
      }
    } catch (error) {
      console.error("Form submission error:", error);
    }
  };

  // ‚úÖ Fix: T·∫°o initialValues ƒë√∫ng c√°ch
  const getInitialFormValues = () => {
    const defaultValues = {
      status: "inactive", // ‚úÖ M·∫∑c ƒë·ªãnh inactive cho form m·ªõi
      isTrending: false,
      availableFormats: [],
    };

    // N·∫øu c√≥ initialValues (ƒëang edit), ∆∞u ti√™n initialValues
    if (initialValues) {
      return {
        ...defaultValues,
        ...initialValues,
        releaseDate: initialValues.releaseDate ? dayjs(initialValues.releaseDate) : null,
      };
    }

    return defaultValues;
  };

  return (
    <Form
      form={form}
      onFinish={handleFinish}
      initialValues={getInitialFormValues()}
      layout="vertical"
    >
      <Row gutter={[20, 5]}>
        <Col span={24}>
          <Form.Item
            name="title"
            label="T√™n phim"
            rules={[{ required: true, message: "Vui l√≤ng nh·∫≠p t√™n phim" }]}
          >
            <Input type="text" />
          </Form.Item>
        </Col>

        <Col span={24}>
          <Form.Item
            name="otherTitles"
            label="T√™n kh√°c"
            tooltip="Nh·∫≠p c√°c t√™n kh√°c, c√°ch nhau b·∫±ng d·∫•u ph·∫©y"
          >
            <Input placeholder="V√≠ d·ª•: T√™n ti·∫øng Anh, T√™n ti·∫øng H√†n, T√™n kh√°c..." />
          </Form.Item>
        </Col>

        <Col span={12}>
          <Form.Item
            name="categoryIds"
            label="Th·ªÉ lo·∫°i"
            rules={[{ required: true, message: "Vui l√≤ng ch·ªçn th·ªÉ lo·∫°i" }]}
          >
            <Select
              mode="multiple"
              allowClear
              key={categories.value}
              placeholder="Ch·ªçn th·ªÉ lo·∫°i"
              options={categories}
            />
          </Form.Item>
        </Col>

        <Col span={12}>
          <Form.Item
            name="availableFormats"
            label="ƒê·ªãnh d·∫°ng chi·∫øu"
            rules={[
              { required: true, message: "Vui l√≤ng ch·ªçn ƒë·ªãnh d·∫°ng chi·∫øu" },
            ]}
          >
            <Select
              mode="multiple"
              allowClear
              placeholder="Ch·ªçn ƒë·ªãnh d·∫°ng chi·∫øu"
              options={[
                { value: "2D", label: "2D" },
                { value: "3D", label: "3D" },
                { value: "IMAX", label: "IMAX" },
              ]}
            />
          </Form.Item>
        </Col>

        <Col span={24}>
          <Form.Item
            name="actors"
            label="Di·ªÖn vi√™n"
            rules={[
              { required: true, message: "Vui l√≤ng nh·∫≠p √≠t nh·∫•t 1 di·ªÖn vi√™n" },
            ]}
            tooltip="Nh·∫≠p t√™n c√°c di·ªÖn vi√™n, c√°ch nhau b·∫±ng d·∫•u ph·∫©y"
          >
            <Input placeholder="V√≠ d·ª•: Ng√¥ Thanh V√¢n, Tr·∫•n Th√†nh, Ki·ªÅu Minh Tu·∫•n..." />
          </Form.Item>
        </Col>

        <Col span={24}>
          <Form.Item
            name="directors"
            label="ƒê·∫°o di·ªÖn"
            tooltip="Nh·∫≠p t√™n c√°c ƒë·∫°o di·ªÖn, c√°ch nhau b·∫±ng d·∫•u ph·∫©y"
            rules={[
              { required: true, message: "Vui l√≤ng nh·∫≠p √≠t nh·∫•t 1 ƒë·∫°o di·ªÖn" },
            ]}
          >
            <Input placeholder="V√≠ d·ª•: L√Ω H·∫£i, Victor V≈©, Dustin Nguy·ªÖn..." />
          </Form.Item>
        </Col>

        <Col span={12}>
          <Form.Item
            name="releaseDate"
            label="Ng√†y ph√°t h√†nh"
            rules={[
              { required: true, message: "Vui l√≤ng ch·ªçn ng√†y ph√°t h√†nh" },
            ]}
          >
            <DatePicker
              style={{ width: "100%" }}
              placeholder="Ch·ªçn ng√†y ph√°t h√†nh"
              format="DD/MM/YYYY"
            />
          </Form.Item>
        </Col>

        <Col span={12}>
          <Form.Item
            name="duration"
            label="Th·ªùi l∆∞·ª£ng (ph√∫t)"
            rules={[
              { required: true, message: "Vui l√≤ng nh·∫≠p th·ªùi l∆∞·ª£ng phim" },
            ]}
          >
            <InputNumber
              min={1}
              placeholder="Nh·∫≠p th·ªùi l∆∞·ª£ng"
              style={{ width: "100%" }}
              addonAfter="ph√∫t"
            />
          </Form.Item>
        </Col>

        <Col span={12}>
          <Form.Item
            name="ageRating"
            label="ƒê·ªô tu·ªïi ph√π h·ª£p"
            rules={[
              { required: true, message: "Vui l√≤ng ch·ªçn ƒë·ªô tu·ªïi ph√π h·ª£p" },
            ]}
          >
            <Select
              placeholder="Ch·ªçn ƒë·ªô tu·ªïi ph√π h·ª£p"
              options={[
                { value: "P", label: "P - Phim d√†nh cho m·ªçi l·ª©a tu·ªïi" },
                { value: "K", label: "K - Phim d√†nh cho tr·∫ª em d∆∞·ªõi 13 tu·ªïi" },
                {
                  value: "T13",
                  label: "T13 - Phim d√†nh cho kh√°n gi·∫£ t·ª´ 13 tu·ªïi tr·ªü l√™n",
                },
                {
                  value: "T16",
                  label: "T16 - Phim d√†nh cho kh√°n gi·∫£ t·ª´ 16 tu·ªïi tr·ªü l√™n",
                },
                {
                  value: "T18",
                  label: "T18 - Phim d√†nh cho kh√°n gi·∫£ t·ª´ 18 tu·ªïi tr·ªü l√™n",
                },
                { value: "C", label: "C - Phim c·∫•m chi·∫øu" },
              ]}
            />
          </Form.Item>
        </Col>

        <Col span={12}>
          <Form.Item
            name="filmLanguage"
            label="Ng√¥n ng·ªØ"
            rules={[{ required: true, message: "Vui l√≤ng nh·∫≠p ng√¥n ng·ªØ" }]}
          >
            <Input placeholder="V√≠ d·ª•: Ti·∫øng Vi·ªát, English, ÌïúÍµ≠Ïñ¥" />
          </Form.Item>
        </Col>

        <Col span={24}>
          <Form.Item name="subtitles" label="Ph·ª• ƒë·ªÅ">
            <Input placeholder="V√≠ d·ª•: Ti·∫øng Vi·ªát, English" />
          </Form.Item>
        </Col>

        <Col span={24}>
          <Form.Item
            name="trailer"
            label="Link Trailer"
            rules={[
              {
                type: "url",
                message: "Vui l√≤ng nh·∫≠p URL h·ª£p l·ªá",
              },
            ]}
          >
            <Input placeholder="https://www.youtube.com/watch?v=..." />
          </Form.Item>
        </Col>

        <Col span={24}>
          <Form.Item
            name="description"
            label="M√¥ t·∫£ phim"
            rules={[{ required: true, message: "Vui l√≤ng nh·∫≠p m√¥ t·∫£ phim" }]}
          >
            <TextArea rows={6} placeholder="Nh·∫≠p m√¥ t·∫£ chi ti·∫øt v·ªÅ phim" />
          </Form.Item>
        </Col>

        <Col span={12}>
          <Form.Item
            label="Upload Poster"
            name="thumbnail"
            valuePropName="fileList"
          >
            <ImgCrop
              showGrid
              rotationSlider
              aspectSlider
              showReset
              aspect={0.6999}
            >
              <Upload
                {...uploadProps}
                loading={uploading}
              >
                {fileList.length >= 1 ? null : (
                  <div>
                    <PlusOutlined />
                    <div style={{ marginTop: 8 }}>Upload</div>
                  </div>
                )}
              </Upload>
            </ImgCrop>
          </Form.Item>
        </Col>

        <Col span={12}>
          <Form.Item label={null}>
            {previewImage && (
              <Image
                wrapperStyle={{ display: "none" }}
                preview={{
                  visible: previewOpen,
                  onVisibleChange: (visible) => setPreviewOpen(visible),
                  afterOpenChange: (visible) => !visible && setPreviewOpen(false),
                }}
                src={previewImage}
              />
            )}
          </Form.Item>
        </Col>

        <Col span={4}>
          <Form.Item
            name="status"
            label="Tr·∫°ng th√°i ho·∫°t ƒë·ªông"
            valuePropName="checked"
            getValueFromEvent={(checked) => (checked ? "active" : "inactive")}
            getValueProps={(value) => ({ checked: value === "active" })}
          >
            <Switch checkedChildren="Active" unCheckedChildren="Inactive" />
          </Form.Item>
        </Col>

        <Col span={12}>
          <Form.Item
            name="isTrending"
            label="Phim xu h∆∞·ªõng"
            valuePropName="checked"
          >
            <Switch
              checkedChildren="Trending"
              unCheckedChildren="Normal"
            />
          </Form.Item>
        </Col>

        <Col span={24}>
          <Form.Item label={null}>
            <Button className="mr-10" type="primary" htmlType="submit" loading={uploading}>
              {submitButtonText}
            </Button>
            {onCancel && (
              <Button className="ml-10" onClick={onCancel}>
                H·ªßy
              </Button>
            )}
          </Form.Item>
        </Col>
      </Row>
    </Form>
  );
}

export default FilmForm;
```

### src\components\Loading\index.jsx
```jsx
import { Spin } from "antd";

const Loading = ({ size = "large", tip = "ƒêang t·∫£i..." }) => {
  return (
    <div style={{ 
      textAlign: 'center', 
      padding: '50px 0',
      width: '100%',
      display: 'flex',
      justifyContent: 'center',
      alignItems: 'center',
      height: '100vh'
    }}>
      <Spin size={size} tip={tip} spinning={true}>
        <div style={{ minHeight: '200px', minWidth: '200px' }} />
      </Spin>
    </div>
  );
};

export default Loading;
```

### src\components\MenuSider\index.jsx
```jsx
import { Menu } from "antd";
import { Link, useLocation } from "react-router-dom";
import {
  DashboardOutlined,
  VideoCameraOutlined,
  ShopOutlined,
  AppstoreOutlined,
  CalendarOutlined,
  UserOutlined,
  CommentOutlined,
  GiftOutlined,
  ShoppingCartOutlined,
} from "@ant-design/icons";

const MenuSider = () => {
  const location = useLocation();

  const items = [
    {
      label: <Link to="/admin/dashboard">Dashboard</Link>,
      icon: <DashboardOutlined />,
      key: "/admin/dashboard",
    },
    {
      label: <Link to="/admin/films">Qu·∫£n l√Ω phim</Link>,
      icon: <VideoCameraOutlined />,
      key: "/admin/films",
    },
    {
      label: <Link to="/admin/cinemas">Qu·∫£n l√Ω r·∫°p chi·∫øu</Link>,
      icon: <ShopOutlined />,
      key: "/admin/cinemas",
    },
    {
      label: <Link to="/admin/rooms">Qu·∫£n l√Ω ph√≤ng chi·∫øu</Link>,
      icon: <AppstoreOutlined />,
      key: "/admin/rooms",
    },
    {
      label: <Link to="/admin/show-times">Qu·∫£n l√Ω su·∫•t chi·∫øu</Link>,
      icon: <CalendarOutlined />,
      key: "/admin/show-times",
    },
    {
      label: <Link to="/admin/users">Qu·∫£n l√Ω th√†nh vi√™n</Link>,
      icon: <UserOutlined />,
      key: "/admin/users",
    },
    {
      label: <Link to="/admin/comments">Qu·∫£n l√Ω b√¨nh lu·∫≠n</Link>,
      icon: <CommentOutlined />,
      key: "/admin/comments",
    },
    {
      label: <Link to="/admin/promotions">Qu·∫£n l√Ω khuy·∫øn m√£i</Link>,
      icon: <GiftOutlined />,
      key: "/admin/promotions",
    },
    {
      label: <Link to="/admin/orders">Qu·∫£n l√Ω ƒë·∫∑t v√©</Link>,
      icon: <ShoppingCartOutlined />,
      key: "/admin/orders",
    },
  ];

  return (
    <Menu
      theme="light"
      mode="inline"
      selectedKeys={[location.pathname]}
      items={items}
    />
  );
};

export default MenuSider;

```

### src\constants\api.js
```js
export const API_ENDPOINTS = {
  // Auth
  AUTH: {
    LOGIN: '/auth/login',
    LOGOUT: '/auth/logout',
    REGISTER: '/auth/register',
    ME: '/auth/me',
    REFRESH: '/auth/refresh'
  },
  
  // Films
  FILMS: {
    LIST: '/films',
    CREATE: '/films',
    DETAIL_BY_ID: (id) => `/films/${id}`,        // Admin: GET by ID
    DETAIL_BY_SLUG: (slug) => `/films/slug/${slug}`,  // Public: GET by slug
    UPDATE: (id) => `/films/${id}`,              // Admin: PATCH
    DELETE: (id) => `/films/${id}`,              // Admin: DELETE
    UPLOAD_POSTER: (id) => `/films/${id}/poster`
  },

  // Category
  CATEGORIES: {
    LIST: '/categories',
    CREATE: '/categories',
    DETAIL: (id) => `/categories/${id}`,
    UPDATE: (id) => `/categories/${id}`,
    DELETE: (id) => `/categories/${id}`
  },
  
  // Cinemas
  CINEMAS: {
    LIST: '/cinemas',
    CREATE: '/cinemas',
    DETAIL_BY_ID: (id) => `/cinemas/${id}`,      // Admin: GET by ID
    DETAIL_BY_SLUG: (slug) => `/cinemas/slug/${slug}`, // Public: GET by slug
    UPDATE: (id) => `/cinemas/${id}`,
    DELETE: (id) => `/cinemas/${id}`,
    ROOMS: (id) => `/cinemas/${id}/rooms`
  },
  
  // Rooms
  ROOMS: {
    LIST: '/rooms',
    CREATE: '/rooms',
    DETAIL: (id) => `/rooms/${id}`,
    UPDATE: (id) => `/rooms/${id}`,
    DELETE: (id) => `/rooms/${id}`
  },

  // Show Times
  SHOW_TIMES: {
    LIST: '/show-times',
    CREATE: '/show-times',
    DETAIL: (id) => `/show-times/${id}`,
    UPDATE: (id) => `/show-times/${id}`,
    DELETE: (id) => `/show-times/${id}`,
    BY_CINEMA: (cinemaId) => `/show-times/cinema/${cinemaId}`,
    BY_FILM: (filmId) => `/show-times/film/${filmId}`
  },
  
  // Users
  USERS: {
    LIST: '/users',
    CREATE: '/users',
    DETAIL: (id) => `/users/${id}`,
    UPDATE: (id) => `/users/${id}`,
    DELETE: (id) => `/users/${id}`,
    PROFILE: '/users/profile'
  },

  // Comments
  COMMENTS: {
    LIST: '/comments',
    CREATE: '/comments',
    DETAIL: (id) => `/comments/${id}`,
    UPDATE: (id) => `/comments/${id}`,
    DELETE: (id) => `/comments/${id}`,
    BY_FILM: (filmId) => `/comments/film/${filmId}`
  },

  // Promotions
  PROMOTIONS: {
    LIST: '/promotions',
    CREATE: '/promotions',
    DETAIL: (id) => `/promotions/${id}`,
    UPDATE: (id) => `/promotions/${id}`,
    DELETE: (id) => `/promotions/${id}`
  },

  // Orders
  ORDERS: {
    LIST: '/orders',
    CREATE: '/orders',
    DETAIL: (id) => `/orders/${id}`,
    UPDATE: (id) => `/orders/${id}`,
    DELETE: (id) => `/orders/${id}`,
    MY_ORDERS: '/orders/my-orders'
  },

  // Upload
  UPLOAD: {
    IMAGE: '/upload/image',
    VIDEO: '/upload/video'
  }
};
```

### src\constants\image.js
```js
// src/constants/images.js
export const DEFAULT_IMAGES = {
  FILM_POSTER: "https://i.pinimg.com/736x/0b/0a/de/0b0adeec0cb5e9a427a616df27ba04f3.jpg",
  CINEMA_LOGO: "https://via.placeholder.com/200x200/f0f0f0/999999?text=Cinema+Logo",
  USER_AVATAR: "https://via.placeholder.com/150x150/e8e8e8/999999?text=User",
  CATEGORY_IMAGE: "https://via.placeholder.com/300x200/f5f5f5/999999?text=Category",
  PROMOTION_BANNER: "https://via.placeholder.com/600x300/f0f8ff/999999?text=Promotion",
  ROOM_IMAGE: "https://via.placeholder.com/400x200/fafafa/999999?text=Room",
};
```

### src\constants\index.js
```js
// src/constants/index.js - Export t·∫•t c·∫£ constants
export { ROLES } from './roles';
export { API_ENDPOINTS } from './api';
export { FILM_STATUS, ORDER_STATUS } from './status';
export { PAGINATION } from './pagination';
export { DEFAULT_IMAGES } from './image';

// üëà B√¢y gi·ªù c√≥ th·ªÉ import 1 l·∫ßn:
// import { ROLES, API_ENDPOINTS, FILM_STATUS } from '../constants';
```

### src\constants\pagination.js
```js
export const PAGINATION = {
  DEFAULT_PAGE: 1,
  DEFAULT_LIMIT: 10,
  PAGE_SIZES: [10, 20, 50, 100]
};
```

### src\constants\roles.js
```js
export const ROLES = {
  ADMIN: 'admin',
  USER: 'user'
};
```

### src\constants\status.js
```js
export const FILM_STATUS = {
  ACTIVE: 'active',
  INACTIVE: 'inactive',
  COMING_SOON: 'coming_soon'
};

export const ORDER_STATUS = {
  PENDING: 'pending',
  PAID: 'paid',
  BLOCKED: 'blocked',
  CANCELLED: 'cancelled',
  REFUNDED: 'refunded'
};
```

### src\helpers\uploadImage.js
```js
/**
 * Upload ·∫£nh l√™n Cloudinary
 * @param {File} file - File ·∫£nh t·ª´ input
 * @returns {Promise<string>} - Tr·∫£ v·ªÅ link ·∫£nh (secure_url)
 */
// ‚úÖ S·ª≠ d·ª•ng environment variable
const API_BASE_URL = process.env.REACT_APP_API_BASE_URL || "http://localhost:5000/api/v1";

export const uploadToCloudinary = async (file) => {
  const formData = new FormData();
  formData.append("file", file);

  const res = await fetch(`${API_BASE_URL}/upload/image`, {
    method: "POST",
    body: formData,
  });

  const data = await res.json();

  if (data.url) return data.url;
  throw new Error("Upload failed");
};

```

### src\hooks\useImageUpload.js
```js
import { useState } from 'react';
import { uploadToCloudinary } from '../helpers/uploadImage';

/**
 * Custom hook ƒë·ªÉ x·ª≠ l√Ω upload v√† preview image
 * @param {Object} options - C·∫•u h√¨nh cho hook
 * @param {string} options.defaultImage - URL ·∫£nh m·∫∑c ƒë·ªãnh
 * @param {number} options.maxCount - S·ªë l∆∞·ª£ng file t·ªëi ƒëa (m·∫∑c ƒë·ªãnh: 1)
 * @param {Function} options.onUploadSuccess - Callback khi upload th√†nh c√¥ng
 * @param {Function} options.onUploadError - Callback khi upload th·∫•t b·∫°i
 * @returns {Object} - Object ch·ª©a states v√† methods
 */
const useImageUpload = (options = {}) => {
  const {
    defaultImage = "https://i.pinimg.com/736x/0b/0a/de/0b0adeec0cb5e9a427a616df27ba04f3.jpg",
    maxCount = 1,
    onUploadSuccess = null,
    onUploadError = null
  } = options;

  // States
  const [fileToUpload, setFileToUpload] = useState(null);
  const [previewOpen, setPreviewOpen] = useState(false);
  const [previewImage, setPreviewImage] = useState("");
  const [fileList, setFileList] = useState([]);
  const [uploading, setUploading] = useState(false);
  const [hasUserInteraction, setHasUserInteraction] = useState(false);

  // Helper function ƒë·ªÉ convert file sang base64
  const getBase64 = (file) =>
    new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.readAsDataURL(file);
      reader.onload = () => resolve(reader.result);
      reader.onerror = (error) => reject(error);
    });

  // X·ª≠ l√Ω tr∆∞·ªõc khi upload (ch·ªâ l∆∞u file, ch∆∞a upload)
  const beforeUpload = (file) => {
    setFileToUpload(file);
    setHasUserInteraction(true);
    return false; // NgƒÉn auto upload
  };

  // X·ª≠ l√Ω preview ·∫£nh
  const handlePreview = async (file) => {
    if (!file.url && !file.preview) {
      file.preview = await getBase64(file.originFileObj);
    }
    setPreviewImage(file.url || file.preview);
    setPreviewOpen(true);
  };

  // X·ª≠ l√Ω thay ƒë·ªïi fileList
  const handleChange = (info) => {
    setHasUserInteraction(true);
    setFileList(info.fileList);

    // N·∫øu fileList r·ªóng (ƒë√£ x√≥a ·∫£nh)
    if (info.fileList.length === 0) {
      setFileToUpload("");
      setPreviewImage("");
    }
    
    // N·∫øu c√≥ file m·ªõi ƒë∆∞·ª£c th√™m v√†o
    if (info.fileList.length > 0 && info.file?.originFileObj) {
      setFileToUpload(info.file.originFileObj);
    }
  };

  // Upload ·∫£nh l√™n Cloudinary
  const uploadImage = async () => {
    if (!fileToUpload) return null;

    try {
      setUploading(true);
      
      if (fileToUpload === "") {
        // ·∫¢nh ƒë√£ b·ªã x√≥a
        onUploadSuccess && onUploadSuccess(defaultImage);
        return defaultImage;
      }

      // Upload ·∫£nh m·ªõi
      const url = await uploadToCloudinary(fileToUpload);
      onUploadSuccess && onUploadSuccess(url);
      return url;
      
    } catch (error) {
      console.error("Upload error:", error);
      onUploadError && onUploadError(error);
      return defaultImage;
    } finally {
      setUploading(false);
    }
  };

  // Set initial values (d√πng khi edit) - ch·ªâ set n·∫øu user ch∆∞a c√≥ t∆∞∆°ng t√°c
  const setInitialImage = (imageUrl) => {
    if (imageUrl && !hasUserInteraction) {
      setPreviewImage(imageUrl);
      const initialFileList = [
        {
          uid: "-1",
          name: "image.jpg",
          status: "done",
          url: imageUrl,
          thumbUrl: imageUrl,
        },
      ];
      setFileList(initialFileList);
    }
  };

  // Force set image (b·ªè qua user interaction check)
  const forceSetImage = (imageUrl) => {
    if (imageUrl) {
      setPreviewImage(imageUrl);
      const initialFileList = [
        {
          uid: "-1",
          name: "image.jpg",
          status: "done",
          url: imageUrl,
          thumbUrl: imageUrl,
        },
      ];
      setFileList(initialFileList);
      setHasUserInteraction(false); // Reset interaction flag
    }
  };

  // Clear current image
  const clearImage = () => {
    setFileToUpload("");
    setPreviewImage("");
    setFileList([]);
    setPreviewOpen(false);
    setHasUserInteraction(true);
  };

  // Reset t·∫•t c·∫£ states v·ªÅ tr·∫°ng th√°i ban ƒë·∫ßu
  const resetAll = () => {
    setFileToUpload(null);
    setPreviewImage("");
    setFileList([]);
    setPreviewOpen(false);
    setUploading(false);
    setHasUserInteraction(false);
  };

  // L·∫•y URL cu·ªëi c√πng ƒë·ªÉ submit form
  const getFinalImageUrl = async (currentImageUrl = null) => {
    // C√≥ file m·ªõi ƒë·ªÉ upload
    if (fileToUpload && fileToUpload !== "") {
      return await uploadImage();
    }
    
    // ·∫¢nh ƒë√£ b·ªã x√≥a
    if (fileToUpload === "") {
      return defaultImage;
    }
    
    // Gi·ªØ nguy√™n ·∫£nh c≈© n·∫øu kh√¥ng c√≥ thay ƒë·ªïi
    if (currentImageUrl && fileToUpload === null) {
      return currentImageUrl;
    }
    
    // Tr∆∞·ªùng h·ª£p kh√¥ng c√≥ ·∫£nh
    return defaultImage;
  };

  return {
    // States
    fileList,
    previewOpen,
    previewImage,
    uploading,
    hasUserInteraction,
    
    // Handlers cho Antd Upload component
    beforeUpload,
    handlePreview,
    handleChange,
    
    // Preview controls
    setPreviewOpen,
    
    // Utility methods
    uploadImage,
    setInitialImage,
    forceSetImage,
    clearImage,
    resetAll,
    getFinalImageUrl,
    
    // Upload props cho Antd Upload
    uploadProps: {
      maxCount,
      fileList,
      onPreview: handlePreview,
      onChange: handleChange,
      beforeUpload,
      listType: "picture-card",
    }
  };
};

export default useImageUpload;
```

### src\layouts\LayoutAdmin\index.jsx
```jsx
import { Button, Layout } from "antd";
import { useState } from "react";
import {
  HomeOutlined,
  MenuUnfoldOutlined,
  MenuFoldOutlined,
  LogoutOutlined,
} from "@ant-design/icons";
import { Link, Outlet } from "react-router-dom";
import MenuSider from "../../components/MenuSider";
import "./LayoutAdmin.scss"
const { Sider, Content } = Layout;

function LayoutAdmin() {
  const [collapsed, setCollapsed] = useState(false);

  return (
    <>
      <Layout className="layout-admin">
        <header className="header">
          <div
            className={
              "header__logoAdmin " + (collapsed && "header__logoAdmin--collapsed")
            }
          >
            {collapsed ? "MV" : "MV Admin"}
          </div>
          <div className="header__nav">
            <div className="header__nav--left">
              <div
                className="header__collapse"
                onClick={() => setCollapsed(!collapsed)}
              >
                {collapsed ? <MenuUnfoldOutlined /> : <MenuFoldOutlined />}
              </div>
            </div>
            <div className="header__nav--right">
              <Link to="/">
                <Button icon={<HomeOutlined />} size="large" className="button">
                  Trang ch·ªß
                </Button>
                
              </Link>
              <Link to="/auth/logout">
                <Button
                  icon={<LogoutOutlined />}
                  size="large"
                  className="button"
                >
                  ƒêƒÉng xu·∫•t
                </Button>
              </Link>
            </div>
          </div>
        </header>
        <Layout>
          <Sider className="sider" collapsed={collapsed} width={250} theme="light">
            <MenuSider  />
          </Sider>
          <Content className="content">
            <Outlet />
          </Content>
        </Layout>
      </Layout>
    </>
  );
}

export default LayoutAdmin;

```

### src\layouts\LayoutUser\index.jsx
```jsx
const LayoutUser = () => {
  return (
    <>
      content
    </>
  );
};

export default LayoutUser;
```

### src\pages\admin\cinemas\CinemaCreatePage.jsx
```jsx
const CinemaCreatePage = () => {
  return (
    <>
      content
    </>
  );
};

export default CinemaCreatePage;
```

### src\pages\admin\cinemas\CinemaDetailPage.jsx
```jsx
const CinemaDetailPage = () => {
  return (
    <>
      content
    </>
  );
};

export default CinemaDetailPage;
```

### src\pages\admin\cinemas\CinemaEditPage.jsx
```jsx
const CinemaEditPage = () => {
  return (
    <>
      content
    </>
  );
};

export default CinemaEditPage;
```

### src\pages\admin\cinemas\CinemaListPage.jsx
```jsx
const CinemaListPage = () => {
  return (
    <>
      content
    </>
  );
};

export default CinemaListPage;
```

### src\pages\admin\cinemas\index.js
```js
// Gom Export Page Cinema
export { default as CinemaListPage } from "./CinemaListPage";
export { default as CinemaDetailPage } from "./CinemaDetailPage";
export { default as CinemaCreatePage } from "./CinemaCreatePage";
export { default as CinemaEditPage } from "./CinemaEditPage";
```

### src\pages\admin\Dashboard\index.jsx
```jsx
const DashBoardPage = () => {
  return (
    <>
    DashBoard n√®
      </>
  );
};

export default DashBoardPage;
```

### src\pages\admin\films\FilmCreatePage.jsx
```jsx
import { useState } from "react";
import { message, Spin } from "antd";
import FilmForm from "../../../components/Form/FilmForm";
import { createFilm } from "../../../services/filmServices";

function FilmCreatePage() {
  const [messageApi, contextHolder] = message.useMessage();
  const [loading, setLoading] = useState(false);

  const handleCreateFilm = async (values) => {
    setLoading(true);
    try {
      const result = await createFilm(values);
      if (result) {
        messageApi.open({
          type: "success",
          content: "T·∫°o phim m·ªõi th√†nh c√¥ng",
          duration: 5,
        });
        return true; // B√°o th√†nh c√¥ng cho FilmForm
      } else {
        messageApi.open({
          type: "error",
          content: "T·∫°o phim m·ªõi kh√¥ng th√†nh c√¥ng",
          duration: 5,
        });
        return false; // B√°o l·ªói nh∆∞ng kh√¥ng reset form
      }
    } catch (err) {
      messageApi.open({
        type: "error",
        content: err.response?.data?.message || "Kh√¥ng th·ªÉ t·∫°o phim",
      });
      return false; // B√°o l·ªói nh∆∞ng kh√¥ng reset form
    } finally {
      setLoading(false);
    }
  };

  const handleCancel = () => {
    console.log("Cancel clicked");
  };

  return (
    <>
      {contextHolder}
      <Spin
        spinning={loading}
         
        tip={
          <>
            <h2>ƒêang ti·∫øn h√†nh l∆∞u phim</h2>
          </>
        }
        size="large"
      >
        <h1>T·∫°o Phim M·ªõi</h1>
        <FilmForm
          onFinish={handleCreateFilm}
          onCancel={handleCancel}
          submitButtonText="T·∫°o phim"
        />
      </Spin>
    </>
  );
}

export default FilmCreatePage;
```

### src\pages\admin\films\FilmDetailPage.jsx
```jsx
import { useState, useEffect, useCallback } from "react";
import { useParams, useNavigate } from "react-router-dom";
import {
  Card,
  Row,
  Col,
  Typography,
  Tag,
  Space,
  Button,
  Image,
  Descriptions,
  Divider,
  message,
  
} from "antd";
import {
  EditOutlined,
  ArrowLeftOutlined,
  CalendarOutlined,
  ClockCircleOutlined,
  TeamOutlined,
  UserOutlined,
  GlobalOutlined,
  CrownOutlined,
  PlayCircleOutlined,
} from "@ant-design/icons";
import dayjs from "dayjs";
import { getFilmById } from "../../../services/filmServices";
import Loading from "../../../components/Loading";
import ErrorDisplay from "../../../components/ErrorDisplay";

const { Title, Text, Paragraph } = Typography;

const FilmDetailPage = () => {
  const { id } = useParams();
  const navigate = useNavigate();
  const [messageApi, contextHolder] = message.useMessage();
  const [filmData, setFilmData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  // Helper function to extract YouTube video ID from URL
  const getYouTubeVideoId = (url) => {
    if (!url) return null;
    const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
    const match = url.match(regExp);
    return match && match[2].length === 11 ? match[2] : null;
  };

  // Convert YouTube URL to embed URL
  const getYouTubeEmbedUrl = (url) => {
    const videoId = getYouTubeVideoId(url);
    return videoId ? `https://www.youtube.com/embed/${videoId}` : null;
  };

  // Fetch film data
const fetchFilmData = useCallback(async () => {
  try {
    setLoading(true);
    setError(null);
    const result = await getFilmById(id);
    setFilmData(result.data);
    console.log("Film data:", result.data);
  } catch (err) {
    console.error("Error fetching film:", err);
    setError(err.response?.data?.message || "Kh√¥ng th·ªÉ t·∫£i th√¥ng tin phim");
    messageApi.error("Kh√¥ng th·ªÉ t·∫£i th√¥ng tin phim");
  } finally {
    setLoading(false);
  }
}, [id, messageApi]); // X√°c ƒë·ªãnh c√°c ph·ª• thu·ªôc c·ªßa hook useCallback

useEffect(() => {
  if (id) {
    fetchFilmData();
  } else {
    setError("Kh√¥ng t√¨m th·∫•y ID phim");
    setLoading(false);
  }
}, [fetchFilmData, id]);

  const handleEdit = () => {
    navigate(`/admin/films/edit/${id}`);
  };

  const handleBack = () => {
    navigate("/admin/films");
  };

  const handleRetry = () => {
    fetchFilmData();
  };

  // Render status tag
  const renderStatusTag = (status) => {
    const statusConfig = {
      active: { color: "green", text: "Ho·∫°t ƒë·ªông" },
      inactive: { color: "red", text: "Ng∆∞ng ho·∫°t ƒë·ªông" },
      coming_soon: { color: "blue", text: "S·∫Øp chi·∫øu" },
    };
    const config = statusConfig[status] || statusConfig.inactive;
    return <Tag color={config.color}>{config.text}</Tag>;
  };

  // Render age rating tag
  const renderAgeRatingTag = (ageRating) => {
    const ageConfig = {
      P: { color: "green", text: "P - M·ªçi l·ª©a tu·ªïi" },
      K: { color: "blue", text: "K - D∆∞·ªõi 13 tu·ªïi" },
      T13: { color: "orange", text: "T13 - T·ª´ 13 tu·ªïi" },
      T16: { color: "red", text: "T16 - T·ª´ 16 tu·ªïi" },
      T18: { color: "volcano", text: "T18 - T·ª´ 18 tu·ªïi" },
      C: { color: "black", text: "C - C·∫•m chi·∫øu" },
    };
    const config = ageConfig[ageRating] || ageConfig.P;
    return <Tag color={config.color}>{config.text}</Tag>;
  };

  if (loading) return <Loading tip="ƒêang t·∫£i th√¥ng tin phim..." />;

  if (error) {
    return (
      <div style={{ padding: "20px" }}>
        <ErrorDisplay message={error} onRetry={handleRetry} />
      </div>
    );
  }

  if (!filmData) {
    return (
      <div style={{ padding: "20px" }}>
        <ErrorDisplay message="Kh√¥ng t√¨m th·∫•y th√¥ng tin phim" />
      </div>
    );
  }

  return (
    <>
      {contextHolder}
      <div style={{ padding: "24px", backgroundColor: "#f5f5f5", minHeight: "100vh" }}>
        {/* Header v·ªõi n√∫t ƒëi·ªÅu h∆∞·ªõng */}
        <div style={{ marginBottom: "24px" }}>
          <Space size="middle">
            <Button
              icon={<ArrowLeftOutlined />}
              onClick={handleBack}
              size="large"
            >
              Quay l·∫°i danh s√°ch
            </Button>
            <Button
              type="primary"
              icon={<EditOutlined />}
              onClick={handleEdit}
              size="large"
            >
              Ch·ªânh s·ª≠a phim
            </Button>
          </Space>
        </div>

        <Row gutter={[24, 24]}>
          {/* C·ªôt tr√°i - Poster v√† th√¥ng tin c∆° b·∫£n */}
          <Col xs={24} md={8}>
            <Card>
              <div style={{ textAlign: "center" }}>
                <Image
                  src={filmData.thumbnail}
                  alt={filmData.title}
                  style={{
                    width: "100%",
                    maxWidth: "350px",
                    borderRadius: "8px",
                  }}
                  preview={{
                    mask: <div>Xem ·∫£nh l·ªõn</div>,
                  }}
                />
                
                <Title level={3} style={{ marginTop: "16px", marginBottom: "8px" }}>
                  {filmData.title}
                </Title>

                <Space direction="vertical" size="small" style={{ width: "100%" }}>
                  {filmData.otherTitles && filmData.otherTitles.length > 0 && (
                    <Text type="secondary" italic>
                      {filmData.otherTitles.join(" ‚Ä¢ ")}
                    </Text>
                  )}
                  
                  <Space wrap>
                    {renderStatusTag(filmData.status)}
                    {filmData.isTrending && (
                      <Tag color="gold" icon={<CrownOutlined />}>
                        Th·ªãnh h√†nh
                      </Tag>
                    )}
                  </Space>
                </Space>
              </div>
            </Card>

            {/* Th√¥ng tin nhanh */}
            <Card title="Th√¥ng tin nhanh" style={{ marginTop: "16px" }}>
              <Descriptions column={1} size="small">
                <Descriptions.Item
                  label={<><CalendarOutlined /> Ng√†y ph√°t h√†nh</>}
                >
                  {dayjs(filmData.releaseDate).format("DD/MM/YYYY")}
                </Descriptions.Item>
                
                <Descriptions.Item
                  label={<><ClockCircleOutlined /> Th·ªùi l∆∞·ª£ng</>}
                >
                  {filmData.duration} ph√∫t
                </Descriptions.Item>
                
                <Descriptions.Item
                  label={<><GlobalOutlined /> Ng√¥n ng·ªØ</>}
                >
                  {filmData.filmLanguage}
                </Descriptions.Item>
                
                {filmData.subtitles && (
                  <Descriptions.Item label="Ph·ª• ƒë·ªÅ">
                    {filmData.subtitles}
                  </Descriptions.Item>
                )}
                
                <Descriptions.Item label="ƒê·ªô tu·ªïi ph√π h·ª£p">
                  {renderAgeRatingTag(filmData.ageRating)}
                </Descriptions.Item>
              </Descriptions>
            </Card>
          </Col>

          {/* C·ªôt ph·∫£i - Th√¥ng tin chi ti·∫øt */}
          <Col xs={24} md={16}>
            {/* Trailer */}
            {filmData.trailer && (
              <Card
                title={
                  <Space>
                    <PlayCircleOutlined />
                    Trailer
                  </Space>
                }
                style={{ marginBottom: "24px" }}
              >
                <div 
                  style={{ 
                    position: "relative", 
                    paddingTop: "56.25%", 
                    overflow: "hidden",
                    borderRadius: "8px"
                  }}
                >
                  {getYouTubeEmbedUrl(filmData.trailer) ? (
                    <iframe
                      src={getYouTubeEmbedUrl(filmData.trailer)}
                      title={`${filmData.title} - Trailer`}
                      width="100%"
                      height="100%"
                      style={{ 
                        position: "absolute", 
                        top: 0, 
                        left: 0,
                        border: "none"
                      }}
                      allowFullScreen
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    />
                  ) : (
                    <div 
                      style={{
                        position: "absolute",
                        top: "50%",
                        left: "50%",
                        transform: "translate(-50%, -50%)",
                        textAlign: "center"
                      }}
                    >
                      <Text type="secondary">Kh√¥ng th·ªÉ t·∫£i trailer</Text>
                    </div>
                  )}
                </div>
              </Card>
            )}

            {/* Th√¥ng tin chi ti·∫øt */}
            <Card title="Th√¥ng tin chi ti·∫øt">
              <Row gutter={[16, 16]}>
                {/* M√¥ t·∫£ phim */}
                <Col span={24}>
                  <div>
                    <Title level={5}>M√¥ t·∫£ phim</Title>
                    <Paragraph>{filmData.description}</Paragraph>
                  </div>
                </Col>

                <Col span={24}>
                  <Divider />
                </Col>

                {/* Di·ªÖn vi√™n */}
                {filmData.actors && filmData.actors.length > 0 && (
                  <Col xs={24} md={12}>
                    <div>
                      <Title level={5}>
                        <TeamOutlined /> Di·ªÖn vi√™n
                      </Title>
                      <Space wrap>
                        {filmData.actors.map((actor, index) => (
                          <Tag key={index} color="blue">
                            {actor}
                          </Tag>
                        ))}
                      </Space>
                    </div>
                  </Col>
                )}

                {/* ƒê·∫°o di·ªÖn */}
                {filmData.directors && filmData.directors.length > 0 && (
                  <Col xs={24} md={12}>
                    <div>
                      <Title level={5}>
                        <UserOutlined /> ƒê·∫°o di·ªÖn
                      </Title>
                      <Space wrap>
                        {filmData.directors.map((director, index) => (
                          <Tag key={index} color="green">
                            {director}
                          </Tag>
                        ))}
                      </Space>
                    </div>
                  </Col>
                )}

                {/* ƒê·ªãnh d·∫°ng chi·∫øu */}
                {filmData.availableFormats && filmData.availableFormats.length > 0 && (
                  <Col xs={24} md={12}>
                    <div>
                      <Title level={5}>ƒê·ªãnh d·∫°ng chi·∫øu</Title>
                      <Space wrap>
                        {filmData.availableFormats.map((format, index) => (
                          <Tag key={index} color="purple">
                            {format}
                          </Tag>
                        ))}
                      </Space>
                    </div>
                  </Col>
                )}

                <Col span={24}>
                  <Divider />
                </Col>

                {/* Th√¥ng tin h·ªá th·ªëng */}
                <Col span={24}>
                  <Title level={5}>Th√¥ng tin h·ªá th·ªëng</Title>
                  <Descriptions column={2} size="small">
                    <Descriptions.Item label="Ng√†y t·∫°o">
                      {dayjs(filmData.createdAt).format("DD/MM/YYYY HH:mm")}
                    </Descriptions.Item>
                    <Descriptions.Item label="C·∫≠p nh·∫≠t l·∫ßn cu·ªëi">
                      {dayjs(filmData.updatedAt).format("DD/MM/YYYY HH:mm")}
                    </Descriptions.Item>
                    <Descriptions.Item label="Slug">
                      <Text code>{filmData.slug}</Text>
                    </Descriptions.Item>
                    <Descriptions.Item label="ID">
                      <Text code>{filmData._id}</Text>
                    </Descriptions.Item>
                  </Descriptions>
                </Col>
              </Row>
            </Card>
          </Col>
        </Row>
      </div>
    </>
  );
};

export default FilmDetailPage;
```

### src\pages\admin\films\FilmEditPage.jsx
```jsx
import { useState, useEffect } from "react";
import { message, Spin } from "antd";
import { useParams, useNavigate } from "react-router-dom";
import FilmForm from "../../../components/Form/FilmForm";
import { getFilmById, updateFilm } from "../../../services/filmServices";
import ErrorDisplay from "../../../components/ErrorDisplay";

function FilmEditPage() {
  const { id } = useParams();
  const navigate = useNavigate();
  const [messageApi, contextHolder] = message.useMessage();
  const [loading, setLoading] = useState(false);
  const [fetching, setFetching] = useState(true);
  const [filmData, setFilmData] = useState(null);
  const [error, setError] = useState(null);

  // Fetch film data khi component mount
  useEffect(() => {
    const fetchFilmData = async () => {
      try {
        setFetching(true);
        setError(null);
        const result = await getFilmById(id);
        const dataFilm = result.data;
        setFilmData(dataFilm);
        console.log('result', result);
      } catch (err) {
        console.error("Error fetching film:", err);
        setError(err.response?.data?.message || "Kh√¥ng th·ªÉ t·∫£i th√¥ng tin phim");
      } finally {
        setFetching(false);
      }
    };

    if (id) {
      fetchFilmData();
    } else {
      setError("Kh√¥ng t√¨m th·∫•y ID phim");
      setFetching(false);
    }
  }, [id]);

  const handleUpdateFilm = async (values) => {
    setLoading(true);
    try {
      const result = await updateFilm(id, values);
      if (result) {
        messageApi.open({
          type: "success",
          content: "C·∫≠p nh·∫≠t phim th√†nh c√¥ng",
          duration: 5,
        });
        
        // Redirect v·ªÅ danh s√°ch sau khi update th√†nh c√¥ng
        setTimeout(() => {
          navigate("/admin/films");
        }, 1500);
        
        return true; // B√°o th√†nh c√¥ng cho FilmForm
      } else {
        messageApi.open({
          type: "error",
          content: "C·∫≠p nh·∫≠t phim kh√¥ng th√†nh c√¥ng",
          duration: 5,
        });
        return false;
      }
    } catch (err) {
      console.error("Update film error:", err);
      messageApi.open({
        type: "error",
        content: err.response?.data?.message || "Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t phim",
        duration: 5,
      });
      return false;
    } finally {
      setLoading(false);
    }
  };

  const handleCancel = () => {
    navigate("/admin/films");
  };

  const handleRetry = () => {
    window.location.reload();
  };

  // Hi·ªÉn th·ªã loading khi ƒëang fetch data
  if (fetching) {
    return (
      <div style={{ padding: '20px' }}>
        <h1>Ch·ªânh s·ª≠a phim</h1>
        <Spin
          size="large"
          tip="ƒêang t·∫£i th√¥ng tin phim..."
          style={{
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            minHeight: '400px'
          }}
        >
          <div style={{ minHeight: 400, minWidth: 400 }} />
        </Spin>
      </div>
    );
  }

  // Hi·ªÉn th·ªã l·ªói n·∫øu kh√¥ng t·∫£i ƒë∆∞·ª£c data
  if (error) {
    return (
      <div style={{ padding: '20px' }}>
        <h1>Ch·ªânh s·ª≠a phim</h1>
        <ErrorDisplay 
          message={error}
          onRetry={handleRetry}
        />
      </div>
    );
  }

  // Hi·ªÉn th·ªã form khi ƒë√£ c√≥ data
  return (
    <>
      {contextHolder}
      <div style={{ padding: '20px' }}>
        <Spin
          spinning={loading}
          tip={
            <>
              <h2>ƒêang ti·∫øn h√†nh c·∫≠p nh·∫≠t phim</h2>
            </>
          }
          size="large"
        >
          <h1>Ch·ªânh s·ª≠a phim: {filmData?.title}</h1>
          <FilmForm
            onFinish={handleUpdateFilm}
            onCancel={handleCancel}
            initialValues={filmData}
            submitButtonText="C·∫≠p nh·∫≠t phim"
          />
        </Spin>
      </div>
    </>
  );
}

export default FilmEditPage;
```

### src\pages\admin\films\FilmListPage.jsx
```jsx
import { Button } from 'antd';
import { PlusOutlined } from '@ant-design/icons';

import { Link } from 'react-router-dom';
import FilmAdminList from '../../../components/FIlmAdminList';
const FilmListPage = () => {
  return (
    <>
      <Link  to="/admin/films/create">
        <Button className='mb-20' variant="outlined" color='primary' icon={<PlusOutlined />}>T·∫°o phim m·ªõi</Button>
      </Link>
      <FilmAdminList />
    </>
  );
};

export default FilmListPage;
```

### src\pages\admin\films\index.js
```js
// Gom Export
export { default as FilmListPage } from "./FilmListPage";
export { default as FilmDetailPage } from "./FilmDetailPage";
export { default as FilmCreatePage } from "./FilmCreatePage";
export { default as FilmEditPage } from "./FilmEditPage";
```

### src\pages\admin\Login\index.jsx
```jsx
// src/pages/admin/Login/index.jsx
import React, { useState } from "react";
import { Form, Input, Button, Typography, message } from "antd";
import { UserOutlined, LockOutlined } from "@ant-design/icons";
import { useNavigate } from "react-router-dom";
import { useDispatch } from "react-redux";
import { login } from "../../../services/authServices";
import { fetchUser } from "../../../redux/actions/auth.action";
import "./Login.scss";

const { Title, Text } = Typography;

const LoginAdmin = () => {
  const [form] = Form.useForm();
  const [loading, setLoading] = useState(false);
  const navigate = useNavigate();
  const dispatch = useDispatch();
  const [messageApi, contextHolder] = message.useMessage();
  const handleLogin = async (values) => {
    try {
      setLoading(true);
      // G·ªçi API login
      await login({
        identifier: values.identifier,
        password: values.password,
      });

      messageApi.open({
        type: "success",
        content: "ƒêaÃÜng nhaÃ£ÃÇp thaÃÄnh coÃÇng",
        duration: 2,
      });
      // L·∫•y th√¥ng tin user sau khi login
      await dispatch(fetchUser());

      // Redirect t·ªõi dashboard
      setTimeout(() => {
        navigate("/admin/dashboard");
      }, 1000);
    } catch (err) {
      console.error("Login error:", err);
      messageApi.open({
        type: "error",
        content: err.response?.data?.message || "Kh√¥ng th·ªÉ l·∫•y th√¥ng tin",
      });
    } finally {
      setLoading(false);
    }
  };

  const handleLoginFailed = (errorInfo) => {
    console.log("Login validation failed:", errorInfo);
    message.error("Vui l√≤ng ki·ªÉm tra l·∫°i th√¥ng tin ƒëƒÉng nh·∫≠p!");
  };

  return (
    <>
      {contextHolder}
      <div className="login-admin">
        <div className="login-admin__container">
          <div className="login-admin__header">
            <div className="login-admin__logo">
              <div className="login-admin__logo-icon">MV</div>
            </div>
            <Title level={2} className="login-admin__title">
              Admin Portal
            </Title>
            <Text className="login-admin__subtitle">
              ƒêƒÉng nh·∫≠p ƒë·ªÉ qu·∫£n tr·ªã h·ªá th·ªëng
            </Text>
          </div>

          <Form
            form={form}
            name="loginAdmin"
            className="login-admin__form"
            onFinish={handleLogin}
            onFinishFailed={handleLoginFailed}
            layout="vertical"
            requiredMark={false}
          >
            <Form.Item
              name="identifier"
              label="T√™n ƒëƒÉng nh·∫≠p / Email"
              rules={[
                {
                  required: true,
                  message: "Vui l√≤ng nh·∫≠p t√™n ƒëƒÉng nh·∫≠p ho·∫∑c email!",
                },
                {
                  min: 4,
                  message: "T√™n ƒëƒÉng nh·∫≠p ph·∫£i c√≥ √≠t nh·∫•t 4 k√Ω t·ª±!",
                },
              ]}
            >
              <Input
                prefix={<UserOutlined />}
                placeholder="Nh·∫≠p t√™n ƒëƒÉng nh·∫≠p ho·∫∑c email"
                size="large"
                className="login-admin__input"
              />
            </Form.Item>

            <Form.Item
              name="password"
              label="M·∫≠t kh·∫©u"
              rules={[
                {
                  required: true,
                  message: "Vui l√≤ng nh·∫≠p m·∫≠t kh·∫©u!",
                },
                {
                  min: 8,
                  message: "M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 8 k√Ω t·ª±!",
                },
              ]}
            >
              <Input.Password
                prefix={<LockOutlined />}
                placeholder="Nh·∫≠p m·∫≠t kh·∫©u"
                size="large"
                className="login-admin__input"
              />
            </Form.Item>

            <Form.Item>
              <Button
                type="primary"
                htmlType="submit"
                size="large"
                loading={loading}
                className="login-admin__button"
                block
              >
                ƒêƒÉng nh·∫≠p
              </Button>
            </Form.Item>
          </Form>

          <div className="login-admin__footer">
            <Text type="secondary">
              ¬© 2024 Movie Admin System. All rights reserved.
            </Text>
          </div>
        </div>
      </div>
    </>
  );
};

export default LoginAdmin;

```

### src\pages\common\LogoutPage.jsx
```jsx
/* eslint-disable react-hooks/exhaustive-deps */
import { useEffect } from "react";
import { useNavigate } from "react-router-dom";
import { useDispatch, useSelector } from "react-redux";
import { logout } from "../../services/authServices";
import { fetchUser } from "../../redux/actions/auth.action";

function LogoutPage() {
  const navigate = useNavigate();
  const dispatch = useDispatch();
  const isAuthenticated = useSelector((state) => state.auth.isAuthenticated);
  useEffect(() => {
    const fetchLogout = async () => {
      try {
        await logout();
        
        dispatch(fetchUser());
        navigate("/");
      } catch (err) {
        alert(err.response?.data?.message || "Kh√¥ng th·ªÉ l·∫•y th√¥ng tin");
      }
    };
    fetchLogout();
  }, [isAuthenticated]);
  return <></>;
}

export default LogoutPage;

```

### src\pages\common\NotFound.jsx
```jsx
// src/pages/common/NotFound.jsx (404 Page)
import React from 'react';
import { Result, Button } from 'antd';
import { Link } from 'react-router-dom';
import { HomeOutlined, ArrowLeftOutlined } from '@ant-design/icons';

const NotFound = () => {
  return (
    <div style={{ 
      height: '100vh', 
      display: 'flex', 
      alignItems: 'center', 
      justifyContent: 'center',
      backgroundColor: '#f5f5f5'
    }}>
      <Result
        status="404"
        title="404"
        subTitle="Xin l·ªói, trang b·∫°n t√¨m ki·∫øm kh√¥ng t·ªìn t·∫°i."
        extra={[
          <Button type="primary" key="home" icon={<HomeOutlined />}>
            <Link to="/">V·ªÅ trang ch·ªß</Link>
          </Button>,
          <Button key="back" icon={<ArrowLeftOutlined />} onClick={() => window.history.back()}>
            Quay l·∫°i
          </Button>
        ]}
      />
    </div>
  );
};

export default NotFound;
```

### src\pages\common\Unauthorized.jsx
```jsx
// src/pages/common/Unauthorized.jsx (403 Page)
import React from 'react';
import { Result, Button } from 'antd';
import { Link, useNavigate } from 'react-router-dom';
import { HomeOutlined, LoginOutlined, ArrowLeftOutlined } from '@ant-design/icons';
import { useSelector } from 'react-redux';

const Unauthorized = () => {
  const navigate = useNavigate();
  const { isAuthenticated, user } = useSelector((state) => state.auth);

  // N√∫t action kh√°c nhau t√πy tr·∫°ng th√°i user
  const getExtraButtons = () => {
    if (!isAuthenticated) {
      // Ch∆∞a ƒëƒÉng nh·∫≠p
      return [
        <Button type="primary" key="login" icon={<LoginOutlined />}>
          <Link to="/admin/auth/login">ƒêƒÉng nh·∫≠p</Link>
        </Button>,
        <Button key="home" icon={<HomeOutlined />}>
          <Link to="/">V·ªÅ trang ch·ªß</Link>
        </Button>
      ];
    }

    // ƒê√£ ƒëƒÉng nh·∫≠p nh∆∞ng kh√¥ng ƒë·ªß quy·ªÅn
    const homeRoute = user?.role === 'admin' ? '/admin/dashboard' : '/';
    
    return [
      <Button type="primary" key="home" icon={<HomeOutlined />}>
        <Link to={homeRoute}>V·ªÅ trang ch√≠nh</Link>
      </Button>,
      <Button key="back" icon={<ArrowLeftOutlined />} onClick={() => navigate(-1)}>
        Quay l·∫°i
      </Button>
    ];
  };

  return (
    <div style={{ 
      height: '100vh', 
      display: 'flex', 
      alignItems: 'center', 
      justifyContent: 'center',
      backgroundColor: '#f5f5f5'
    }}>
      <Result
        status="403"
        title="403"
        subTitle={
          !isAuthenticated 
            ? "B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ truy c·∫≠p trang n√†y." 
            : "Xin l·ªói, b·∫°n kh√¥ng c√≥ quy·ªÅn truy c·∫≠p trang n√†y."
        }
        extra={getExtraButtons()}
      />
    </div>
  );
};

export default Unauthorized;
```

### src\redux\actions\auth.action.js
```js
// src/redux/actions/auth.action.js
import { checkLogin } from "../../services/authServices";

// Action types
export const SET_USER = "SET_USER";
export const LOGOUT = "LOGOUT";
export const AUTH_LOADING = "AUTH_LOADING";
export const AUTH_ERROR = "AUTH_ERROR";

// Thunk Action: g·ªçi API v√† l∆∞u user v√†o store
export const fetchUser = () => async (dispatch) => {
  try {
    dispatch({ type: AUTH_LOADING }); // üëà b·∫Øt ƒë·∫ßu loading
    
    const check = await checkLogin();
    dispatch({ type: SET_USER, payload: check.user });
  } catch (error) {
    console.error("L·ªói l·∫•y user:", error.response?.data || error.message);
    
    // üëà dispatch l·ªói thay v√¨ ch·ªâ logout
    dispatch({ 
      type: AUTH_ERROR, 
      payload: error.response?.data?.message || "Kh√¥ng th·ªÉ x√°c th·ª±c ng∆∞·ªùi d√πng" 
    });
    
    dispatch({ type: LOGOUT }); // Token sai, h·∫øt h·∫°n => logout
  }
};
```

### src\redux\reducers\auth.reducer.js
```js
// src/redux/reducers/auth.reducer.js
import { ROLES } from "../../constants";
import { SET_USER, LOGOUT } from "../actions/auth.action";

const initialState = {
  user: null,
  isAuthenticated: false,
  loading: false,    // üëà tr·∫°ng th√°i ƒëang t·∫£i
  error: null,       // üëà l∆∞u l·ªói n·∫øu c√≥
};

const authReducer = (state = initialState, action) => {
  switch (action.type) {
    case "AUTH_LOADING":
      return {
        ...state,
        loading: true,
        error: null,
      };
    
    case SET_USER:
      return {
        ...state,
        user: action.payload,
        isAuthenticated: true,
        loading: false,    // üëà t·∫Øt loading
        error: null,
      };
    
    case LOGOUT:
      return {
        ...state,
        user: null,
        isAuthenticated: false,
        loading: false,
        error: null,
      };
    
    case "AUTH_ERROR":
      return {
        ...state,
        loading: false,
        error: action.payload, // üëà l∆∞u th√¥ng b√°o l·ªói
      };
    
    default:
      return state;
  }
};
//  Helper function ƒë·ªÉ check role
export const isAdmin = (user) => user?.role === ROLES.ADMIN;
export const isUser = (user) => user?.role === ROLES.USER;

export default authReducer;
```

### src\redux\reducers\index.js
```js
import { combineReducers } from "redux"
import authReducer from "./auth.reducer";




const allReducers = combineReducers({
    auth: authReducer,
    //Th√™m nhi·ªÅu reducer ·ªü ƒë√¢y
});

export default allReducers;
```

### src\routes\adminRoutes.js
```js
// src/routes/adminRoutes.js
import { lazy, Suspense } from "react";
import LayoutAdmin from "../layouts/LayoutAdmin";
import PrivateRoutes from "./PrivateRoutes";
import Loading from "../components/Loading";

// üëà Lazy load c√°c component
const DashBoardPage = lazy(() => import("../pages/admin/Dashboard"));
const FilmListPage = lazy(() => import("../pages/admin/films/FilmListPage"));
const FilmCreatePage = lazy(() => import("../pages/admin/films/FilmCreatePage"));
const FilmEditPage = lazy(() => import("../pages/admin/films/FilmEditPage"));
const FilmDetailPage = lazy(() => import("../pages/admin/films/FilmDetailPage"));
const CinemaListPage = lazy(() => import("../pages/admin/cinemas/CinemaListPage"));
const CinemaCreatePage = lazy(() => import("../pages/admin/cinemas/CinemaCreatePage"));
const CinemaEditPage = lazy(() => import("../pages/admin/cinemas/CinemaEditPage"));

// üëà Wrapper component v·ªõi Suspense
const LazyWrapper = ({ children }) => (
  <Suspense fallback={<Loading tip="ƒêang t·∫£i trang..." />}>
    {children}
  </Suspense>
);

const adminRoutes = [
  {
    element: <PrivateRoutes allowedRoles={["admin"]} redirectPath="/admin/auth/login" />,
    children: [
      {
        path: "/admin",
        element: <LayoutAdmin />,
        children: [
          { 
            index: true, 
            element: <LazyWrapper><DashBoardPage /></LazyWrapper> 
          },
          { 
            path: "dashboard", 
            element: <LazyWrapper><DashBoardPage /></LazyWrapper> 
          },

          // Films
          { 
            path: "films", 
            element: <LazyWrapper><FilmListPage /></LazyWrapper> 
          },
          { 
            path: "films/:id", 
            element: <LazyWrapper><FilmDetailPage /></LazyWrapper> 
          },
          { 
            path: "films/create", 
            element: <LazyWrapper><FilmCreatePage /></LazyWrapper> 
          },
          { 
            path: "films/edit/:id", 
            element: <LazyWrapper><FilmEditPage /></LazyWrapper> 
          },

          // Cinemas
          { 
            path: "cinemas", 
            element: <LazyWrapper><CinemaListPage /></LazyWrapper> 
          },
          { 
            path: "cinemas/create", 
            element: <LazyWrapper><CinemaCreatePage /></LazyWrapper> 
          },
          { 
            path: "cinemas/edit/:id", 
            element: <LazyWrapper><CinemaEditPage /></LazyWrapper> 
          },
        ],
      },
    ],
  },
];

export default adminRoutes;
```

### src\routes\AllRoutes.jsx
```jsx
import { useRoutes } from "react-router-dom";
import routes from "./index";

const  AllRoutes = () => {
  return useRoutes(routes);
}

export default AllRoutes;

```

### src\routes\commonRoutes.js
```js
import LayoutUser from "../layouts/LayoutUser";
import LoginAdmin from "../pages/admin/Login";
import LogoutPage from "../pages/common/LogoutPage";
import NotFound from "../pages/common/NotFound";
import Unauthorized from "../pages/common/Unauthorized";


const commonRoutes = [
  {
    path: "/",
    element: <LayoutUser />,
    children: [
      // { index: true, element: <HomePage /> },
      // { path: "auth/login", element: <LoginPage /> },
      // { path: "auth/register", element: <RegisterPage /> },
       
      // { path: "search", element: <SearchPage /> },
      // { path: "films/:id", element: <FilmDetailPage /> },
    ],
  },
  {
    path: "/admin",
    children: [
      {
        path: "auth/login",
        element: <LoginAdmin />
      }
    ]
  },
   // üëà Error pages - kh√¥ng c·∫ßn layout
  {
    path: "/unauthorized",
    element: <Unauthorized />  // 403 Forbidden
  },
  {
    path: "/404",
    element: <NotFound />      // 404 Not Found
  },
  // üëà Catch-all route - ph·∫£i ƒë·∫∑t cu·ªëi c√πng
  {
    path: "*",
    element: <NotFound />      // B·∫•t k·ª≥ route n√†o kh√¥ng match s·∫Ω hi·ªÉn th·ªã 404
  },
  
    { path: "auth/logout", element: <LogoutPage /> },
  
];

export default commonRoutes;

```

### src\routes\index.js
```js
import commonRoutes from "./commonRoutes";
import userRoutes from "./userRoutes";
import adminRoutes from "./adminRoutes";

const routes = [
  ...commonRoutes,
  ...userRoutes,
  ...adminRoutes,
];

export default routes;





```

### src\routes\PrivateRoutes.jsx
```jsx
import { useSelector } from "react-redux";
import { Navigate, Outlet } from "react-router-dom";

/**
 * PrivateRoutes
 * @param {Array} allowedRoles - danh s√°ch role ƒë∆∞·ª£c ph√©p (["admin"], ["user"], ["admin","user"])
 * @param {String} redirectPath - ƒë∆∞·ªùng d·∫´n n·∫øu ch∆∞a ƒëƒÉng nh·∫≠p (m·∫∑c ƒë·ªãnh: "/auth/login")
 */
const  PrivateRoutes = ({ allowedRoles = [], redirectPath = "/auth/login" }) => {
  const { isAuthenticated, user } = useSelector((state) => state.auth);
  const role = user?.role || "";
  // Ch∆∞a ƒëƒÉng nh·∫≠p
  if (!isAuthenticated) {
    return <Navigate to={redirectPath} replace />;
  }

  // Kh√¥ng ƒë√∫ng role
  if (allowedRoles.length > 0 && !allowedRoles.includes(role)) {
    return <Navigate to="/unauthorized" replace />;
  }

  // Pass ‚Üí cho ph√©p v√†o c√°c route con
  return <Outlet />;
}

export default PrivateRoutes;

```

### src\routes\userRoutes.js
```js
import LayoutUser from "../layouts/LayoutUser";
import PrivateRoutes from "./PrivateRoutes";


const userRoutes = [
  {
    element: <PrivateRoutes allowedRoles={["user"]} redirectPath="/auth/login" />,
    children: [
      {
        element: <LayoutUser />,
        children: [
          // { path: "profile", element: <ProfilePage /> },
          // { path: "my-tickets", element: <MyTicketsPage /> },
          // { path: "payment", element: <PaymentPage /> },
          // { path: "carts", element: <CartPage /> },
        ],
      },
    ],
  },
];

export default userRoutes;

```

### src\services\authServices.js
```js
import { API_ENDPOINTS } from "../constants";
import { get, post } from "../utils";

// -- ƒêƒÉng k√Ω
export const register = (userData) =>
  post(API_ENDPOINTS.AUTH.REGISTER, userData);

// -- ƒêƒÉng nh·∫≠p
export const login = (userData) => post(API_ENDPOINTS.AUTH.LOGIN, userData);

// -- ƒêƒÉng Xu·∫•t
export const logout = () => post(API_ENDPOINTS.AUTH.LOGOUT);

// -- Ki·ªÉm tra Login
export const checkLogin = () => get(API_ENDPOINTS.AUTH.ME);

```

### src\services\categoryServices.js
```js
import { API_ENDPOINTS } from "../constants";
import { get } from "../utils";

export const getCategories = () => get(API_ENDPOINTS.CATEGORIES.LIST);
```

### src\services\cinemaServices.js
```js

```

### src\services\filmServices.js
```js
import { API_ENDPOINTS } from "../constants";
import { del, get, patch, post } from "../utils";

export const createFilm = (data) => post(API_ENDPOINTS.FILMS.CREATE, data);

// Get all films
export const getAllFilms = () => get(API_ENDPOINTS.FILMS.LIST);

//get single film by id
export const getFilmById = (id) => get(API_ENDPOINTS.FILMS.DETAIL_BY_ID(id));

// Get single film by slug
export const getFilmBySlug = (slug) =>
  get(API_ENDPOINTS.FILMS.DETAIL_BY_SLUG(slug));

// Update existing film
export const updateFilm = (id, data) =>
  patch(API_ENDPOINTS.FILMS.UPDATE(id), data);

// Delete film
export const deleteFilm = (id) => del(API_ENDPOINTS.FILMS.DELETE(id));

// Update film status (active/inactive)
export const updateFilmStatus = (id, status) =>
  patch(API_ENDPOINTS.FILMS.UPDATE(id), { status });

// Update film trending status
export const updateFilmTrending = (id, isTrending) =>
  patch(API_ENDPOINTS.FILMS.UPDATE(id), { isTrending });

```

### src\services\userServices.js
```js

```

### src\utils\axiosClient.js
```js
// services/axiosClient.js
import axios from "axios";
// ‚úÖ S·ª≠ d·ª•ng environment variable
const API_BASE_URL = process.env.REACT_APP_API_BASE_URL || "http://localhost:5000/api/v1";

const axiosClient = axios.create({
  baseURL: API_BASE_URL, // üëà thay ƒë·ªïi t√πy m√¥i tr∆∞·ªùng
  withCredentials: true,           // üëà ƒë·ªÉ g·ª≠i/nh·∫≠n cookie HttpOnly
  headers: {
    "Content-Type": "application/json",
  },
});

// ‚úÖ Interceptors (t√πy ch·ªçn): th√™m token ho·∫∑c x·ª≠ l√Ω l·ªói chung
axiosClient.interceptors.request.use(
  (config) => {
    // N·∫øu d√πng localStorage token th√¨ th√™m ·ªü ƒë√¢y (c√°ch 1 - header)
    // const token = localStorage.getItem("token");
    // if (token) config.headers.Authorization = `Bearer ${token}`;

    return config;
  },
  (error) => Promise.reject(error)
);

axiosClient.interceptors.response.use(
  (response) => response.data, // ch·ªâ l·∫•y `data` cho g·ªçn
  (error) => {
    console.error("API error:", error.response);
    return Promise.reject(error);
  }
);

export default axiosClient;

```

### src\utils\index.js
```js
import axiosClient from "./axiosClient";

export const get = (url, config) => axiosClient.get(url, config);

export const post = (url, data, config) => axiosClient.post(url, data, config);

export const patch = (url, data, config) => axiosClient.patch(url, data, config);

export const del = (url, config) => axiosClient.delete(url, config);

```
